import{V as L}from"./vendor.c27c7ed2.js";const T=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&u(l)}).observe(document,{childList:!0,subtree:!0});function c(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(s){if(s.ep)return;s.ep=!0;const o=c(s);fetch(s.href,o)}};T();let m=0,v=(e,{W:i,H:c,dpr:u,scrollY:s=0,grid:o,circle:l,easing:E=.25})=>{e.lineWidth=1/u,e.fillStyle="#F0F0F0",e.fillRect(0,0,i,c),m+=(s-m)*E,e.beginPath(),e.strokeStyle="rgba(0,0,0, .125)";for(let w=0;w<o.max;w++){let p=w*o.cell;if(e.moveTo(p,0),e.lineTo(p,c),w<o.rows){let y=(p+o.speed*m)%o.height;e.moveTo(0,y),e.lineTo(i,y)}}e.stroke(),e.moveTo(0,0),e.arc(l.x,l.speed*m,l.r,0,2*Math.PI),e.fillStyle=l.fill,e.fill()};function W(){return new Worker("/experiments/assets/worker.9e2cdcc3.js",{type:"module"})}let n=window.devicePixelRatio,r=window.innerWidth,a=window.innerHeight,d=window.scrollY,f=0,M=0,g=window.innerWidth>=720?150:84,t={cell:g,cols:Math.round(r/g),rows:Math.round(a/g),height:0,speed:.25},h={x:0,y:0,r:0,fill:"#FFDC4E",speed:-.75};class x{constructor(i){this.canvas=i,this.init(),window.addEventListener("resize",()=>this.setSize()),window.addEventListener("scroll",()=>{d=Math.max(0,window.scrollY),this.worker?this.worker.postMessage({event:"scroll",options:{scrollY:d}}):(f||this.start(),clearTimeout(M),M=setTimeout(this.stop,250))},{passive:!0})}init(){if(this.setSize(),"transferControlToOffscreen"in this.canvas){this.worker=new W;let i=this.canvas.transferControlToOffscreen();this.worker.onmessage=({data:c})=>{c.event==="ready"&&this.showCanvas()},this.worker.postMessage({event:"init",canvas:i,options:{W:r,H:a,dpr:n,scrollY:d,grid:t,circle:h}},[i])}else this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.ctx.scale(n,n),v(this.ctx,{W:r,H:a,dpr:n,scrollY:d,grid:t,circle:h,easing:1}),this.showCanvas()}showCanvas(){this.canvas.classList.add("loaded")}setSize(){if(n=window.devicePixelRatio,r=window.innerWidth,a=window.innerHeight,t.cell=r>=720?150:84,t.cols=Math.round(r/t.cell),t.rows=Math.round(a/t.cell)+1,t.cell=Math.round(r/t.cols),t.max=Math.max(t.cols,t.rows),t.height=t.rows*t.cell,h.r=Math.max(0,(r-900)/2)+300,this.worker)return this.worker.postMessage({event:"resize",options:{W:r,H:a,dpr:n,scrollY:d,grid:t,circle:h}});this.canvas.width=r*n,this.canvas.height=a*n,!!this.ctx&&(this.ctx.scale(n,n),f||v(this.ctx,{W:r,H:a,dpr:n,scrollY:d,grid:t,circle:h}))}update(){f=requestAnimationFrame(()=>this.update()),v(this.ctx,{W:r,H:a,dpr:n,scrollY:d,grid:t,circle:h})}start(){this.stop(),this.update()}stop(){cancelAnimationFrame(f),f=0}}const C=window.matchMedia("(hover)").matches,F=window.matchMedia("(prefers-reduced-motion: reduce)").matches,k=C&&!F;let S=[...document.getElementsByTagName("iframe")];S.forEach(e=>{e.addEventListener("load",()=>{e.classList.add("loaded"),!!k&&(e.parentNode.addEventListener("mouseenter",()=>{e.contentWindow.postMessage("start","*")}),e.parentNode.addEventListener("mouseleave",()=>{e.contentWindow.postMessage("stop","*")}))})});k&&[...document.getElementsByClassName("experiment")].forEach(i=>{L.init(i,{reverse:!1,max:5,speed:600,gyroscope:!1})});let N=document.getElementById("bg");new x(N);
